<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Graph try</title>
        <meta name="description" content="Interaktywny">
        <link rel="stylesheet" href="./css/webGraph.css">
        
        
        
           </head>
    <body>
<script>
    var mainBox_elements='';
    function createBlock(x,y){
        //var el=document.getElementById("mainDiv");
        var style='height="'+x+'" width="'+y+'"';
        //var b=createSvg.polyline('fill="none" stroke="#0074d9"',['0,0','0,'+y,x+','+y,x+',0','0,0']);
        var a=createSvg.svg(style,'');
        //el.innerHTML=a;
          mainBox_elements+=a;
        console.log(mainBox_elements);
        return a;
        //createSvg.addElement("mainDiv",b);
    }

    function cos(){
var svg = document.getElementsByTagName('svg')[0]; //Get svg element
var newElement = document.createElementNS("http://www.w3.org/2000/svg", 'path'); //Create a path in SVG's namespace
newElement.setAttribute("d","M 0 0 L 10 10"); //Set path's data
newElement.style.stroke = "#000"; //Set stroke colour
newElement.style.strokeWidth = "5px"; //Set stroke width
svg.appendChild(newElement);
    }
    function createGraph(){
    //var getLabel=getMinLabel();//min max medium
    var el=document.getElementById("mainDiv");
    x = 50;  
    y = 50;  
    min=20;
    max=30;
    style='height:'+x+'px';
    //elements=[labelY(x,y),labelX(max,min,y),minMaxText(max,min,y)];
    elements="";
    elements+=createSvg.group('grid',createGrids(x,y));
       
       elements+=createSvg.group('labelY',labelY(x,y));
       elements+=createSvg.group('labelY',labelX(25,20,y));
       elements+=createSvg.group('text',minMaxText(25,20,x,y));
       //console.log(text);
       
       text=createSvg.svg(style,elements);
       el.innerHTML=text;
    
      //createSvg.tryTest();
   }
    
    var figurePrototype=function(){
        
        this.solidFill=true;
        this.pocketHeight=2;
        this.generateColor=function(){}
    }
    function circleFigure(){
        figurePrototype.call(this);
        this.radius=30;
        this.pointsPossition=[[0,0]]
        this.drawCircle=function(){
        this.heightColor='#00cc00' //generateColor();
            return '<circle cx="'+this.pointsPossition[0][0]+'" cy="'+this.pointsPossition[0][1]+'" r="'+this.radius+'" style="stroke:#006600; fill:'+this.heightColor+'"/>'
        }
    }
    var exaplesObjects={
        fig0:{
            specie:'circle',//pierscien(annulus),line,shape
            body:{
                pocketHeight:2,//glebokosc
                pointsPossition:[[15,15]],
                radious:5,
                fillSolid:true
            }
        },
        fig1:{
            type:'line',//pierscien(annulus),line,shape
            pocketHeight:2,//glebokosc
            pointsPossition:[[0,0],[15,15]],
        },
        fig2:{
            type:'polyline',//pierscien(annulus),line,shape
            pocketHeight:2,//glebokosc
            pointsPossition:[[0,0],[0,15],[15,15],[15,0]],
            fillSolid:true
        },
        fig3:{
            type:'annulus',//pierscien(annulus),line,shape
            pocketHeight:2,//glebokosc
            pointsPossition:[[30,30]],
            //esential elemnts^
            //in case of type
            Radious:10,
            radious:5,
            fillSolid:true
        }
    }
    var createSvg=(function(){
        addElementtoSVG=function(id,element){
            var el=readDiv(id);
            console.log(el);
            element+='</svg>';
            mainBox_elements=mainBox_elements.replace("</svg>",element);
            var a=refreshDiv(mainBox_elements,el);
            console.log('svg:',mainBox_elements);  
            //el.innerHTML=mainBox_elements;

        }
        readDiv=function(id){
            var el=document.getElementById(id);
            console.log(el);
            return el;
        }
        refreshDiv=function(element,el){
            el.innerHTML='';
            el.innerHTML=element;
            return element;
            
        }
        addElementToSVG=function(old,element){
            var string=element+'</svg>';
            return old.replace("</svg>",string);
        }
        lineElement=function (x1,y1,x2,y2, style){
            return '<line x1="'+x1+'" x2="'+x2+'" y1="'+y1+'" y2="'+y2+' style:"'+style+'></line>';
        }
        svgElement=function(style,elements){
            //<g class="labels y-labels"></g>
            /*var text="";
            elements =[].concat(elements);
            for(var i=0;i<elements.length;i++){
                   text+=elements[i];
            }*/
         return '<svg '+style+'>'+elements+'</svg>';  
            
        }
        textElement=function(x,y,msg){
            //<text x="80" y="248">5</text>
            return '<text x="'+x+'" y="'+y+'">'+msg+'</text>';
        }
        polylineElement=function(style,points){
            var text="";   
            for (var i=0;i<points.length;i++){
                   text+=points[i];
                   text+=" ";
            }
            return '<polyline '+style+' points="'+text+'"/>';    
        }
        groupElement=function(className,elements){
            //<g class="labels y-labels"></g>
            var text="";
            elements =[].concat(elements);
            for(var i=0;i<elements.length;i++){
                   text+=elements[i];
            }
         return '<g class="'+className+'">'+text+'</g>';       
        }
        //testy
        tryTest=function(){
            try{
                testGroup();
                testPolyline();
                testLine();
            }
            catch(e){console.log(e);}
        }
        testPolyline=function(){
            var a=createSvg.polylineElement( 'fill="none" stroke="#0074d9"',['10,10','20,20','30,30'])
            assertEqual('<polyline fill="none" stroke="#0074d9" points="10,10 20,20 30,30 "/>',a)  
        }
        testGroup=function(){
            var a=groupElement('labels',['<line </>','<g>']);
                b=groupElement('labels','<line </>');
            assertEqual(a,'<g class="labels"><line </><g></g>');
            assertEqual(b,'<g class="labels"><line </></g>');
        }
        testLine=function(){
            var a=lineElement(10,10,20,20)
            assertEqual(a,'<line x1="10" x2="20" y1="10" y2="20"></line>');
        }
    return{
        text:textElement,
        polyline:polylineElement,
        group:groupElement,
        svg:svgElement,
        line:lineElement,
        tryTest:tryTest,
        addElement:addElementtoSVG
    };
    
})(); 
        function test(){
            var a=createBlock(150,150);
            var x=new circleFigure();
            var element=x.drawCircle();
            var b=createSvg.polyline( 'fill="block" stroke="#0074d9"',['10,10','20,20','0,20'])
            createSvg.addElement('mainDiv',element);
            createSvg.addElement('mainDiv',b);
            console.log(x);
            
        }
        
        
 </script>


<div id='mainDiv' style='border:solid black 1px'>
    <svg>

    <circle cx="40" cy="40" r="24" style="stroke:#006600; fill:#00cc00"/>

</svg>
</div>
        <button onclick='test()'>dfh</button>
    </body>
</html>